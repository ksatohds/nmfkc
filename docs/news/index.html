<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Changelog • nmfkc</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Changelog"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">nmfkc</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.5.7</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/classification-with-nmfkc.html">Classification with NMF-LAB</a></li>
    <li><a class="dropdown-item" href="../articles/introduction-to-nmfkc.html">Introduction to nmfkc</a></li>
    <li><a class="dropdown-item" href="../articles/timeseries-with-nmfkc.html">Time Series Analysis with NMF-VAR</a></li>
    <li><a class="dropdown-item" href="../articles/topic-modeling-with-nmfkc.html">Topic Modeling with nmfkc</a></li>
  </ul></li>
<li class="active nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/ksatohds/nmfkc/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-news">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Changelog</h1>
      <small>Source: <a href="https://github.com/ksatohds/nmfkc/blob/HEAD/NEWS.md" class="external-link"><code>NEWS.md</code></a></small>
    </div>

    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.5.7" id="nmfkc-057">nmfkc 0.5.7<a class="anchor" aria-label="anchor" href="#nmfkc-057"></a></h2>
<div class="section level4">
<h4 id="graphviz-dot-output-consolidation-and-cleanup-0-5-7"><strong>Graphviz DOT Output Consolidation and Cleanup</strong><a class="anchor" aria-label="anchor" href="#graphviz-dot-output-consolidation-and-cleanup-0-5-7"></a></h4>
<ul><li><p>Harmonized all DOT-generating functions (<code>nmf.sem.DOT</code>, <code>nmfkc.DOT</code>, <code>nmfkc.ar.DOT</code>) for consistent structure, naming conventions, and visualization logic.</p></li>
<li><p>Standardized node and edge formatting rules, including unified cluster behavior, color schemes, and edge-scaling conventions.</p></li>
<li><p>Implemented threshold-aware coefficient labeling so that displayed numerical precision aligns with the visualization threshold, preventing misleadingly detailed labels.</p></li>
<li><p>Removed unused or redundant DOT fragments and improved compatibility across Graphviz engines.</p></li>
<li><p>Enhanced layout readability through consistent indentation, node grouping, and suppression of isolated nodes in specific visualization modes (e.g., <code>type = "YA"</code> in <code>nmfkc.DOT</code>).</p></li>
<li><p>Refactored and expanded internal DOT helper functions (<code>.nmfkc_dot_format_coef</code>, <code>.nmfkc_dot_digits_from_threshold</code>, <code>.nmfkc_dot_cluster_nodes</code>, etc.) for better maintainability and uniform behavior.</p></li>
<li>
<p><strong>New Function:</strong> Implemented <code><a href="../reference/nmfkc.ecv.html">nmfkc.ecv()</a></code> for Element-wise Cross-Validation (Wold’s CV).</p>
<ul><li>This function randomly masks elements of the observation matrix to evaluate structural reconstruction error.</li>
<li>It provides a statistically robust criterion for rank selection, avoiding the monotonic error decrease often seen in standard column-wise CV.</li>
<li>Supports vector input for <code>rank</code> to evaluate multiple ranks simultaneously.</li>
</ul></li>
<li>
<p><strong>Missing Value &amp; Weight Support:</strong></p>
<ul><li>
<code><a href="../reference/nmfkc.html">nmfkc()</a></code> and <code><a href="../reference/nmfkc.cv.html">nmfkc.cv()</a></code> now fully support missing values (<code>NA</code>) and observation weights via the hidden argument <code>Y.weights</code> (passed through <code>...</code>).</li>
<li>If <code>Y</code> contains <code>NA</code>s, they are automatically detected and masked (assigned a weight of 0) during optimization.</li>
</ul></li>
<li>
<p><strong>Rank Selection Diagnostics (<code>nmfkc.rank</code>):</strong></p>
<ul><li>
<strong>Dual-Axis Visualization:</strong> The plot now displays fitting metrics (<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msup><mi>R</mi><mn>2</mn></msup><annotation encoding="application/x-tex">R^2</annotation></semantics></math>, etc.) on the left axis and ECV Sigma (RMSE) on the right axis (blue line).</li>
<li>
<strong>Automatic Best Rank labeling:</strong> The plot explicitly marks the “Best” rank based on two criteria:
<ul><li>
<strong>Elbow:</strong> Geometric elbow point of the <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msup><mi>R</mi><mn>2</mn></msup><annotation encoding="application/x-tex">R^2</annotation></semantics></math> curve.</li>
<li>
<strong>Min:</strong> Minimum error point of the Element-wise CV.</li>
</ul></li>
<li>
<code>save.time</code> defaults to <code>FALSE</code>, enabling the robust Element-wise CV calculation by default.</li>
</ul></li>
<li>
<p><strong>Argument Standardization:</strong></p>
<ul><li>Unified the rank argument name to <code>rank</code> across all functions (<code>nmfkc</code>, <code>nmfkc.cv</code>, <code>nmfkc.ecv</code>, <code>nmfkc.rank</code>).</li>
<li>The legacy argument <code>Q</code> is still supported for backward compatibility but internally mapped to <code>rank</code>.</li>
</ul></li>
<li>
<p><strong>Summary Improvements:</strong></p>
<ul><li>Updated <code><a href="https://rdrr.io/pkg/urca/man/summary-methods.html" class="external-link">summary()</a></code> and <code><a href="https://rdrr.io/r/base/print.html" class="external-link">print()</a></code> methods to report:
<ul><li>Sparsity of Basis (<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>X</mi><annotation encoding="application/x-tex">X</annotation></semantics></math>) and Coefficients (<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>B</mi><annotation encoding="application/x-tex">B</annotation></semantics></math>).</li>
<li>Clustering Entropy (indicating “Crisp” vs “Ambiguous” clustering).</li>
<li>Clustering Crispness (Mean Max Probability).</li>
<li>Number and percentage of missing values in <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>Y</mi><annotation encoding="application/x-tex">Y</annotation></semantics></math>.</li>
</ul></li>
</ul></li>
<li>
<p><strong>Other Improvements:</strong></p>
<ul><li>Added a validation check in <code><a href="../reference/nmfkc.ar.html">nmfkc.ar()</a></code> to ensure the input <code>Y</code> has no missing values (as they cannot be propagated to the covariate matrix <code>A</code> in VAR models).</li>
<li>Refined <code><a href="../reference/nmfkc.residual.plot.html">nmfkc.residual.plot()</a></code> layout margins for better visibility of titles.</li>
<li>Updated documentation to reflect all changes.</li>
</ul></li>
<li>
<p>Regularization Update:<br>
The regularization scheme has been revised from <strong>L2 (ridge)</strong> to <strong>L1 (lasso-type)</strong> penalties.</p>
<ul><li>
<code>gamma</code> now controls the <strong>L1 penalty on the coefficient matrix</strong> ( B = C A ), promoting sparsity in sample-wise coefficients.<br></li>
<li>A new argument <code>lambda</code> has been added to control the <strong>L1 penalty on the parameter matrix</strong> ( C ), encouraging sparsity in the shared template structure.<br>
Both parameters can be passed through the ellipsis (<code>...</code>) to <code><a href="../reference/nmfkc.html">nmfkc()</a></code> and related functions.<br></li>
</ul></li>
<li><p>Function Signature Simplification:** Many less-frequently used arguments in <code><a href="../reference/nmfkc.html">nmfkc()</a></code> (e.g., <code>gamma</code>, <code>X.restriction</code>, <code>X.init</code>) and in <code><a href="../reference/nmfkc.cv.html">nmfkc.cv()</a></code> (e.g., <code>div</code>, <code>seed</code>) have been moved into the ellipsis (<code>...</code>) for a cleaner function signature.</p></li>
<li><p>Performance Improvement: The internal function <code>.silhouette.simple</code> was vectorized and optimized to reduce computational cost, particularly for the calculation of <code>a(i)</code> and <code>b(i)</code>.</p></li>
<li><p>Removed the <code>fast.calc</code> option from the <code><a href="../reference/nmfkc.html">nmfkc()</a></code> function.</p></li>
<li><p>Added the <code>X.init</code> argument to the <code><a href="../reference/nmfkc.html">nmfkc()</a></code> function, allowing selection between <code>'kmeans'</code> and <code>'nndsvd'</code> initialization methods.</p></li>
<li><p>The penalty term has been changed from <code>tr(CC')</code> to <code>tr(BB')</code> = <code>tr(CAA'C')</code>.</p></li>
<li><p>Implemented the internal <code>.z</code> and <code>xnorm</code> functions.</p></li>
<li><p>Added the fast.calc option to the <code><a href="../reference/nmfkc.html">nmfkc()</a></code> function.</p></li>
<li><p>Optimized internal calculations for improved performance.</p></li>
<li><p>Updated <code>citation("nmfkc")</code> and added AIC/BIC to the output.</p></li>
<li><p>Implemented the <code><a href="../reference/nmfkc.ar.stationarity.html">nmfkc.ar.stationarity()</a></code> function.</p></li>
<li><p>Modified the <code>z()</code> function.</p></li>
<li><p>Used <code><a href="https://rdrr.io/r/base/crossprod.html" class="external-link">crossprod()</a></code> for faster matrix multiplication.</p></li>
<li><p>Implemented the <code><a href="../reference/nmfkc.ar.DOT.html">nmfkc.ar.DOT()</a></code> function.</p></li>
<li><p>Added logic to sort the columns of <code>X</code> to form a unit matrix in special cases.</p></li>
<li><p>Implemented <code><a href="../reference/nmfkc.kernel.beta.cv.html">nmfkc.kernel.beta.cv()</a></code> and <code><a href="../reference/nmfkc.ar.degree.cv.html">nmfkc.ar.degree.cv()</a></code> functions.</p></li>
<li><p>Set the default column names of <code>X</code> to <code>Basis1</code>, <code>Basis2</code>, etc.</p></li>
<li><p>Added <code>X.prob</code> and <code>X.cluster</code> to the return object.</p></li>
<li><p>Skipped CPCC and silhouette calculations when <code>save.time = TRUE</code>.</p></li>
<li><p>Added a prototype for the <code><a href="../reference/nmfkc.ar.html">nmfkc.ar()</a></code> function.</p></li>
<li><p>Added the <code>criterion</code> argument to the <code><a href="../reference/nmfkc.html">nmfkc()</a></code> function to support multiple criteria.</p></li>
<li><p>Updated the <code><a href="../reference/nmfkc.rank.html">nmfkc.rank()</a></code> function.</p></li>
<li><p>Added the <code>criterion</code> argument to the <code><a href="../reference/nmfkc.rank.html">nmfkc.rank()</a></code> function.</p></li>
<li><p>Implemented the <code>save.time</code> argument.</p></li>
<li><p>Implemented the <code><a href="../reference/nmfkc.rank.html">nmfkc.rank()</a></code> function.</p></li>
<li><p>Implemented the <code>nstart</code> option from the <code><a href="https://rdrr.io/r/stats/kmeans.html" class="external-link">kmeans()</a></code> function.</p></li>
<li><p>Added an experimental implementation of the <code><a href="../reference/nmfkc.rank.html">nmfkc.rank()</a></code> function.</p></li>
<li><p>Removed zero-variance columns and rows with a warning.</p></li>
<li><p>Added source and references to the documentation.</p></li>
<li>
<p>Renamed several components for clarity:</p>
<ul><li>
<code>nmfkcreg</code> to <code>nmfkc</code>
</li>
<li>
<code>create.kernel</code> to <code>nmfkc.kernel</code>
</li>
<li>
<code>nmfkcreg.cv</code> to <code>nmfkc.cv</code>
</li>
<li>
<code>P</code> to <code>B.prob</code>
</li>
<li>
<code>cluster</code> to <code>B.cluster</code>
</li>
<li>
<code>unit</code> to <code>X.column</code>
</li>
<li>
<code>trace</code> to <code>print.trace</code>
</li>
<li>
<code>dims</code> to <code>print.dims</code>
</li>
</ul></li>
<li><p>Added the <code>r.squared</code> argument to the <code>nmfkcreg.cv()</code> function.</p></li>
<li>
<p>In <code>nmfkcreg()</code>:</p>
<ul><li>Added the <code>dims</code> argument to check matrix sizes.</li>
<li>Added the <code>unit</code> argument to normalize the basis matrix columns.</li>
</ul></li>
<li><p>Modified the <code>create.kernel()</code> function to support prediction.</p></li>
<li><p>Updated examples on GitHub.</p></li>
<li><p>Removed the <code>YHAT</code> return value; use <code>XB</code> instead.</p></li>
<li><p>Added the <code>cluster</code> return value for hard clustering.</p></li>
</ul></div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Kenichi Satoh.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

